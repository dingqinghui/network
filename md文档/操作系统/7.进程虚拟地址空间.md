## 1.PCB内存管理结构：
![img](https://i.loli.net/2021/04/27/fJNrLtsyv6XCHY4.png)
PCB对内存的管理结构，页表指针 + List<段信息>。
一次内存的分配其实就是分配逻辑地址更改段信息，逻辑地址的合法性也是通过这个结构检测的。

## 2.页表结构 radix tree：

![image-20210427171856361](https://i.loli.net/2021/04/27/CYxWUljtsBo4Jzi.png)
物理地址需要和虚拟地址建立映射管理，假设映射关系为 物理地址 = f(虚拟地址)。那么页表就是函数f()。 页表使用radix tree结构。

## 3.页表项结构：
![img](https://i.loli.net/2021/04/27/e4fzhJxNadAvm1E.png)


## 4.内存查找过程：
![img](https://i.loli.net/2021/04/27/6yUT4njGD3SPxmM.png)

计算机指令使用的是虚拟地址，虚拟地址是连续的更容易管理使用。物理内存存储在页表中计算机中的一块硬件接收来自虚拟内存的请求，然后访问页表以找到数据的物理内存位置。这种硬件称为内存管理单元（MMU）或动态地址转换（DAT）单元。为了使数据访问尽可能快，MMU存储了一个在一个名为translation lookaside buffer的表中，有有限数量的常用映射。如果地址不在TLB中，MMU将直接访问页表。它扫描表直到找到地址。然后将地址返回到TLB。如果虚拟内存和物理内存之间没有映射，产生一个缺页中断，中断处理函数检测是否是合法的地址，如果合法分配内存、读取数据填充内存、建立映射。

如果分配内存时内存不足，那么会进行swap，根据策略将内存中的数据写到磁盘上。下次操作内存时，产生缺页中断再重新都会内存。



https://blog.csdn.net/qq_38410730/article/details/81036768